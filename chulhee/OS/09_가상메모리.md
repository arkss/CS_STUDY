# 09. 가상 메모리



## 1. 가상 메모리?

> 주기억장치의 이용가능한 메모리 크기보다 훨씬 더 큰 주소 지정을 할 수 있도록 합니다.

하나의 프로세스 전체가 모두 메모리에 있지 않고 일부만 있더라도 수행이 가능합니다.

프로세스를 실행할 때, 실행에 필요한 부분만 메모리에 올려둘 수 있습니다.

가상 주소 공간을 구성하는 것을 **가상 메모리** 라고 하고,
실제로 주소 공간을 구성하는 것을 **주기억장치(main memory)** 라고 합니다.

실제 물리적 저장 공간과 가상 저장 공간 사이 **사상(mapping)** 은 OS에 의해 수행됩니다.

- **가상 주소 공간**
  - 수행 중인 프로세스가 참조하는 가상 메모리 상의 주소 범위
- **실제 주소 공간**
  - 컴퓨터 시스템에서 사용 가능한 주기억장치 상의 주소 범위



### 1.1 동적 주소 변환

> 프로세스가 수행될 때 가상 주소를 실제 주소로 변환하는 메커니즘

가상 주소는 실제 주소에 빠르게 매핑되어야 합니다. 



**인위적 연속성**

가상 주소 공간 상의 연속된 주소는 실제 주소 공간에서도 연속적일 필요는 없습니다.



#### 1.1.1 블록 사상(매핑) Block Mapping

동적 주소 변환에서는

- 가상 주소에 대한 주기억장치 내 존재 여부
- 존재하는 경우 어디에 위치하는지

나타내는 테이블을 관리하게 됩니다.



매핑이 바이트 단위로 수행된다면 매핑 정보가 너무 커져 메인 메모리를 많이 차지하게 됩니다.

이를 막기 위해 **블록(block)** 이라는 단위로 매핑 항목을 묶음으로써 여러 가상 메모리 블록이 위치하는 장소만 알 수 있도록 합니다.

블록 크기가 같다면 -> 페이지
가상 메모리 구성 -> 페이징

블록 크기가 다르다면 -> 세그먼트
가상 메모리 구성 -> 세그먼테이션





## 2. 페이징

> 가상 기억 장치를 같은 크기의 블록 (페이지) 로 나누어 사용하는 기법

- 페이지 (Page)
  - 가상 메모리를 일정한 크기로 나눈 블록
- 프레임 (Frame)
  - 실제 주소 공간, 물리 메모리를 일정한 크기로 나눈 블록

프레임에 페이지가 들어가기에 프레임과 페이지는 같은 크기로 관리됩니다.

![54821888-d9191700-4ce6-11e9-8b11-7af6fdbcbe06](../assets/os/paging.png)

프로세스를 5개의 페이지로 나뉘어져 있고,

메모리에 연속되지 않은 5곳에 할당됩니다.

CPU는 논리 주소를 토대로 연속적인 주소로 명령을 내릴 수 있습니다.















## 레퍼런스

- 박규석 외 3명, 운영체제, 생능출판, 4장 가상 메모리
- [운영체제 페이징 velog.io/@codemcd](https://velog.io/@codemcd/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9COS-13.-%ED%8E%98%EC%9D%B4%EC%A7%95)





## 추가 공부 사항

- 페이징 vs 세그멘테이션



## 질문 키워드

