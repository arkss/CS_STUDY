# 05. 프로세스 스캐줄링

## 01. 프로세스 스캐줄링이란

여러 프로세스들은 CPU를 사용하기 위해 경쟁을 합니다.

프로세스에 비해 컴퓨터 자원은 제한적이기 때문에 CPU의 가동시간을 적절하게 프로세스들에게 분배해주어야 합니다.

이를 **프로세스 스캐줄링**이라고 합니다.



## 02. 스캐줄링 평가 기준

다양한 종류의 스캐줄링이 있고 상황에 따라 적절한 스캐줄링 방식이 존재합니다.

좋은 스캐줄링을 평가하는 지표는 아래와 같습니다.

* CPU 이용률 : 전체 시스템 시간 중 CPU가 작업을 처리하는 시간의 비율(CPU가 쉬지 않고 최대한 일하게 하는 것이 좋은 스캐줄링)
* 처리량 : CPU가 단위 시간 당 처리하는 프로세스의 개수
* 총 처리 시간 : 프로세스가 시작해서 끝날 때 까지 걸린 시간
* 대기 시간 : 프로세스가 준비완료 큐에서 대기하는 시간의 총 합
* 응답 시간 : 대화식 시스템에서 요청 후 첫 응답이 오기까지 걸린 시간





## 03. 선점 VS 비선점

스캐줄링 기법은 크게 **선점(preemptive)**과 **비선점(non-preemptive)**으로 나눌 수 있습니다.

비선점 방식은 이미 할당된 CPU를 다른 프로세스가 강제로 빼앗을 수 없는 스캐줄링 방법을 말합니다.

프로세스 간 문맥교환을 줄여 성능을 향상시키게 됩니다.



선점 방식은 가장 자원을 필요로 하는 프로세스에게 CPU를 분배하기 위해 다른 프로세스가 사용 중인 CPU를 뺏을 수 있습니다.

따라서 빠른 응답을 요구하는 대화식 사용자 환경에 적합합니다.



각각에 대한 스캐줄링 방법들을 살펴봅시다.



## 04. 비선점 스캐줄링

### FCFS 스캐줄링

**FCFS**는 `First Come First Serve` 의 줄임말로 먼저 들어온 순서대로 CPU를 할당받습니다.

작업시간이 오래 걸리는 프로세스가 들어온 후 이후의 프로세스들은 대기가 길어집니다.

이러한 현상을 `convey effect` 라고 하며 CPU 사용률을 낮추기 때문에 지양해야하는 방법입니다.



### Shortest Job First 스캐줄링

**Shortest Job First**은 준비 큐에 있는 프로세스 중에서 가장 CPU 요구량이 적은 것을 먼저 실행시켜주는 방식입니다.

평균적인 응답 시간은 최소화 할 수 있지만 실행시간이 긴 프로세스는 CPU를 할당받지 못하고 계속해서 대기하는 문제가 발생합니다.

또한 어느 프로세스가 가장 CPU 요구량이 적은지 판단하는 것도 쉽지 않습니다.



### HRRN 스캐줄링

**Highest Response Ratio Next** 은 Shortest Job First 스캐줄링 방법의 단점을 보안하기 위해 나왔습니다.

응답률이 높은 프로세스에게 CPU를 할당하는 방식입니다.

여기서 응답률이란, `(대기시간 + CPU 요구량) / CPU 요구량` 이며 Shortest Job First 스캐줄링에서 실행시간이 긴 프로세스도 대기시간이 길어지면, 응답률이 높아서 CPU를 할당받을 수 있습니다.



## 05. 선점 스캐줄링

### Round Robin 스캐줄링

FCFS 스캐줄링을 기본으로 하고, 각 프로세스가 한 번에 쓸 수 있는 시간을 제한한 스캐줄링 방식입니다.

가장 오래되고 간단하고 공평하고 가장 널리 사용되는 알고리즘입니다.



여기서 프로세스가 한 번에 쓸 수 있는 시간, 할당량을 선정하는 것이 중요한 요점입니다.

할당량이 너무 짧다면, 문맥교환에 비용이 불필요하게 커져 비효율적으로 되고,

할당량이 너무 길다면, FCFS의 단점을 해결하지 못합니다.

보통 20~50msec 정도의 할당시간이 합리적입니다.



### priority 스캐줄링

Round Robin 스캐줄링은 모든 프로세스를 모두 동등하게 대했습니다.

하지만 실제로 각 프로세스들은 중요도가 다릅니다.

이를 고려하여 priority 스캐줄링은 각 프로세스에 우선순위를 할당하고 우선순위가 높은 프로세스를 먼저 수행하는 방식입니다.



높은 우선순위의 프로세스가 무한히 실행되는 것을 막기 위한 몇 가지 방법이 있습니다.

* 클록 인터럽트마다 현재 실행중인 프로세스의 우선순위를 낮춥니다.
* Round Robin과 같이 할당량에 제한을 둡니다.

> priority 스캐줄링은 비선점 스캐줄링으로 보기도 합니다.



### Multi-level Queue 스캐줄링

다단계 큐 스캐줄링은 여러 개의 큐를 사용하는 스캐줄링 방식입니다.

각 큐에는 우선순위가 동일한 프로세스들이 들어오게 되고, 각 큐마다 다른 스캐줄링 방식을 택할 수 있습니다.

또한 우선순위가 낮은 큐에 프로세스가 CPU를 할당받고 있어도 우선순위가 높은 큐에 프로세스가 들어오게 되면 우선순위가 높은 프로세스가 CPU를 차지하게 됩니다.



### Shortest Remaining Time 스캐줄링

Shortest Remaining Time 스캐줄링은 남은 시간이 가장 짧은 프로세스를 우선적으로 수행하는 방식입니다.

다른 프로세스를 수행하고 있더라도 남은 실행 시간이 더 적은 프로세스가 준비 큐에 들어오면 해당 프로세스를 수행하게 됩니다.





## 레퍼런스

* http://blog.naver.com/PostView.nhn?blogId=bycho211&logNo=220985701140

* 운영체제론

## 질문할 사항



## 추가 공부할 키워드

프로세스간 통신의 문제 (식사하는 철학자, 읽는자 쓰는 자)